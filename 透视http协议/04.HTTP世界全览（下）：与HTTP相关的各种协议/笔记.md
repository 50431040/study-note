# HTTP世界全览（下）：与HTTP相关的各种协议

## TCP/IP

- TCP/IP 协议实际上是一系列网络通信协议的统称，其中最核心的两个协议是 TCP 和 IP，其他的还有 UDP、ICMP、ARP 等，共同构成了一个复杂但有层次的协议栈。这个协议栈共有四层，最上层是“应用层”，最下层是“链接层”，TCP属于“传输层”，IP属于“网际层”。

- IP 协议的主要解决寻址和路由问题，以及如何在两点间传送数据包。IP 协议使用”IP地址“的概念来定位互联网上的每一台计算机。现在我们使用的 IP 协议大多数是 v4 版，地址是四个用”.“分割的数字，大约可以分配42亿个地址。后面又出现了 v6 版，使用8组":"分割的数字作为地址。

- TCP 的中文为传输控制协议，它位于 IP 协议之上，基于 IP 协议提供可靠的、字节流形式的通信，是 HTTP 协议得以实现的基础。”可靠“是指保证数据不丢失，”字节流“是保证数据完整，所以在 TCP 协议的两端可以如同操作文件一样访问传输的数据，就像是读写在一个密闭的管道里”流动“的字节。

- HTTP 是一个传输协议，不关心寻址、路由、数据完整性等传输细节，而这些工作都由下层来处理。 TCP/IP 协议刚好满足 HTTP 的要求。

## DNS

域名用”.“分割成多个单词，级别从左到右逐级升高，最右边的称为”顶级域名“。想要使用 TCP/IP 协议来通信仍然要使用 IP 地址，所以需要将域名”映射“到真实 IP，这就是”域名解析“。

## URI/URL

- URI 中文名为统一资源标识符，使用它能够唯一地标记互联网上的资源。

- URL 中文名为统一资源定位符，也就是俗称的”网址“，实际上是 URI 的一个子集，两者几乎相同。

- URI 由三个基本部分组成：协议名、主机名（可以是域名或 IP 地址）、路径。

## HTTPS

- HTTPS 是运行在 SSL/TLS 协议上的 HTTP。

- SSL/TLS 是一个负责加密通信的安全协议，建立在 TCP/IP 之上，所以也是个可靠的传输协议，可以被用作 HTTP 的下层。

- SSL 后面改名为 TLS，使用了许多密码学最先进的研究成果，综合了对称加密、非对称加密、摘要算法、数字签名、数字证书等技术，能够创建出一个秘密的、安全的传输通道。

## 代理

- 代理是 HTTP 协议中请求方和应答方中间的一个环节，作为”中转站“，既可以转发客户端的请求，也可以转发服务端的应答。

- 代理有几种常见种类：

1. 匿名代理：完全”隐匿“了被代理的机器，外界看到的只是代理服务器。

2. 透明代理：在传输过程中”透明开放“，外界既知道代理，也知道客户端

3. 正向代理：靠近客户端，代表客户端向服务器发送请求

4. 反向代理：靠近服务器端，代表服务器响应客户端的请求

- 由于代理在传输过程中插入了一个”中间层“，所以能够做很多事：

1. 负载均衡：将请求均匀分散到多台机器，实现访问集群化

2. 内容缓存：暂存上下行的数据，减轻后端的压力

3. 安全防护：隐匿 IP，使用 WAF 等工具防御网络攻击，保护被代理的机器

4. 数据处理：提供压缩、加密等额外的功能