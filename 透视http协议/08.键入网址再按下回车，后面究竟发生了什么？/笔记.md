# 键入网址再按下回车，后面究竟发生了什么？

## 抓包分析

1. 三次握手，建立 TCP 连接

- SYN(客->服)

- SYN/ACK(服->客)

- ACK(客->服)

2. 发送 HTTP 请求

3. 服务器回复一个 TCP 的 ACK 包表示已收到请求

4. 返回文件

5. 浏览器给服务器回复一个 TCP 的 ACK 确认收到了

简述：

1. 浏览器从地址栏的输入中获得服务器的 IP 和端口号

2. 浏览器用 TCP 的三次握手与服务器建立连接

3. 浏览器向服务器发送拼好的报文

4. 服务器收到报文后处理请求，拼好报文后发给浏览器

5， 浏览器解析报文，渲染输出页面

## 小结

1. HTTP 协议基于底层的 TCP/IP 协议，必须要用 IP 地址建立连接

2. 如果不知道 IP 地址，就要用 DNS 去解析得到 IP 地址

3. 建立 TCP 连接后会顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析报文

4. 为了减少响应时间，整个过程的每一个环节都可以有缓存，能够实现“短路”操作

5. 虽然现实中的 HTTP 传输过程非常复杂，但理论上仍然可以简化成实验里的“两点”模型